(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{476:function(t,e,n){var content=n(480);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("5d701915",content,!0,{sourceMap:!1})},478:function(t,e,n){"use strict";n(17),n(18),n(8),n(184);var r=n(22),o=n(31),c=n(67),l=n(68),d=n(44),f=n(11),m=n(33);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var v=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){Object(c.a)(n,t);var e=h(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"variant",get:function(){return"light"===this.$inkline.config.variant?"dark":"light"}}]),n}(m.d);v([Object(m.c)({required:!0,type:Boolean})],y.prototype,"loading",void 0);var _=y=v([m.a],y),j=(n(479),n(1)),component=Object(j.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-spinner"},[this.loading?e("div",{staticClass:"m-spinner__wrapp"},[e("i-loader",{attrs:{variant:this.variant}})],1):this._e(),this._v(" "),e("div",{class:["m-spinner__content",{_loading:this.loading}]},[this._t("default")],2)])}),[],!1,null,null,null);e.a=component.exports;installComponents(component,{ILoader:n(93).default})},479:function(t,e,n){"use strict";var r=n(476);n.n(r).a},480:function(t,e,n){(e=n(3)(!1)).push([t.i,".m-spinner{position:relative}.m-spinner__content{transition:.2s}.m-spinner__content._loading{opacity:.5;pointer-events:none}.m-spinner__wrapp{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}",""]),t.exports=e},481:function(t,e,n){var content=n(487);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("41b2eaf3",content,!0,{sourceMap:!1})},482:function(t,e,n){var content=n(489);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("fbdf1500",content,!0,{sourceMap:!1})},483:function(t,e,n){var content=n(491);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("1a537340",content,!0,{sourceMap:!1})},486:function(t,e,n){"use strict";var r=n(481);n.n(r).a},487:function(t,e,n){(e=n(3)(!1)).push([t.i,".popover-wrapper[data-v-6aaa6433]  .popover>.body{padding:1px}",""]),t.exports=e},488:function(t,e,n){"use strict";var r=n(482);n.n(r).a},489:function(t,e,n){(e=n(3)(!1)).push([t.i,".item.item[data-v-2ececcb4],.item.item[data-v-2ececcb4]  .header .icon{position:static}",""]),t.exports=e},490:function(t,e,n){"use strict";var r=n(483);n.n(r).a},491:function(t,e,n){(e=n(3)(!1)).push([t.i,".progress[data-v-5e06ce25]{background-color:#e9ecef;border:1px solid #343a40;display:flex}.progress__bar[data-v-5e06ce25]{height:1rem;width:100%;background-color:#5bc2a8;transform-origin:left;transition:1.8s cubic-bezier(.53,.89,.73,.89)}.tabs[data-v-5e06ce25]  .header{overflow:auto}",""]),t.exports=e},492:function(t,e,n){"use strict";n.r(e);n(17),n(18),n(184),n(8),n(211);var r=n(22),o=n(31),c=n(67),l=n(68),d=n(44),f=n(11),m=n(33),h=(n(24),n(473),function(t,e){var n=function(){if(Number.isInteger(t)){if(t<60)return"".concat(t,"m");var e=t%60,n=(t-e)/60;return 0===e?"".concat(n,"h"):"".concat(n,"h").concat(e,"m")}return"?"}();return e?"".concat(e,"x").concat(n):n});function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){Object(c.a)(n,t);var e=v(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).currentNumber=0,t}return Object(o.a)(n,[{key:"forceAnimation",value:function(){var t=this,e=setInterval((function(){t.currentNumber>=t.number?clearInterval(e):t.currentNumber+=1}),this.speed)}},{key:"displayNumber",get:function(){return this.prefix+this.currentNumber+this.postfix}}]),n}(m.d);y([Object(m.c)({required:!1,type:String,default:""})],_.prototype,"prefix",void 0),y([Object(m.c)({required:!1,type:String,default:""})],_.prototype,"postfix",void 0),y([Object(m.c)({required:!0,type:Number})],_.prototype,"number",void 0),y([Object(m.c)({required:!1,type:Number,default:50})],_.prototype,"speed",void 0),y([Object(m.e)("number")],_.prototype,"forceAnimation",null);var j=_=y([m.a],_),O=n(1),k=Object(O.a)(j,(function(){var t=this.$createElement;return(this._self._c||t)("span",{domProps:{textContent:this._s(this.displayNumber)}})}),[],!1,null,"1d254897",null).exports,R=n(478),w=n(57);n(10),n(256),n(25);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var S=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){Object(c.a)(n,t);var e=C(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"handleDelete",value:function(){var t=this;this.$axios({method:"delete",url:this.deleteUrl}).then((function(e){var data=e.data;t.$emit("delete",t.mediaType,data)}))}},{key:"deleteUrl",get:function(){return"/media/".concat(this.mediaType,"s/").concat(this.id)}},{key:"editLink",get:function(){return{name:"media-id-edit",params:{id:this.id,media:this.mediaType}}}}]),n}(m.d);S([Object(m.c)({required:!0,type:String})],x.prototype,"id",void 0),S([Object(m.c)({required:!0,type:String})],x.prototype,"mediaType",void 0);var D=x=S([Object(m.a)({components:{}})],x),T=(n(486),Object(O.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i-button-group",[n("i-button",{attrs:{to:t.editLink}},[n("i-icon",{attrs:{icon:"code"}})],1),t._v(" "),n("i-popover",{attrs:{placement:"top",variant:"dark"}},[n("i-button",{attrs:{id:"media-"+t.id}},[n("i-icon",{attrs:{icon:"times"}})],1),t._v(" "),n("i-button-group",{attrs:{slot:"body",block:""},slot:"body"},[n("i-button",{attrs:{variant:"danger"},on:{click:t.handleDelete}},[t._v("\n        Confirm\n      ")]),t._v(" "),n("i-button",{on:{click:function(e){t.popover=!1}}},[t._v("\n        Cancel\n      ")])],1)],1)],1)}),[],!1,null,"6aaa6433",null)),P=T.exports;function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}installComponents(T,{IIcon:n(83).default,IButton:n(37).default,IButtonGroup:n(56).default,IPopover:n(214).default});var $=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},V=function(t){Object(c.a)(n,t);var e=I(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).formatDuration=h,t}return Object(o.a)(n,[{key:"handleDelete",value:function(t,e){return{mediaType:t,media:e}}},{key:"currentSeason",get:function(){return parseInt(this.media.toWatch?this.media.toWatch.replace(/s(\d+)/,"$1"):1)}},{key:"currentSearies",get:function(){return parseInt(this.media.toWatch?this.media.toWatch.replace(/s\d+e(\d+)/,"$1"):1)}},{key:"loggedIn",get:function(){return this.$auth.loggedIn}},{key:"genres",get:function(){return this.media.genres.sort().join(", ")}}]),n}(m.d);$([Object(m.c)({default:!1,required:!1,type:Boolean})],V.prototype,"controls",void 0),$([Object(m.c)({default:{},required:!0,type:Object})],V.prototype,"media",void 0),$([Object(m.c)({required:!0,type:String})],V.prototype,"mediaType",void 0),$([Object(m.b)("delete")],V.prototype,"handleDelete",null);var A=V=$([Object(m.a)({components:{CrudButtons:P}})],V),B=Object(O.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["list__item",{_watched:t.media.watched},t.$inkline.config.variant]},[n("div",{staticClass:"list__item-block _title"},[""!==t.media.link?n("a",{staticClass:"list__item-link",attrs:{href:t.media.link,title:t.media.title,rel:"noreferrer noopener"},domProps:{textContent:t._s(t.media.title)}}):n("span",{staticClass:"list__item-link",attrs:{title:t.media.title},domProps:{textContent:t._s(t.media.title)}})]),t._v(" "),n("div",{staticClass:"list__item-block _duration"},[n("span",{staticClass:"list__item-span"},[t._v("Duration")]),t._v("\n    "+t._s(t.formatDuration(t.media.duration,t.media.totalSeries))+"\n\n    "),Array.isArray(t.media.seasons)?n("div",{staticClass:"seasons"},t._l(t.media.seasons,(function(e,i){return n("div",{key:i,class:["seasons__item",{_current:i+1===t.currentSeason}]},[t._v("\n        "+t._s("Season "+(i+1)+" - "+e)+"\n        "),i+1<t.currentSeason?[t._v(t._s(" / "+e))]:t._e(),t._v(" "),i+1===t.currentSeason?[t._v(t._s(" / "+t.currentSearies))]:t._e()],2)})),0):t._e()]),t._v(" "),n("div",{staticClass:"list__item-block _year"},[n("span",{staticClass:"list__item-span"},[t._v("Year")]),t._v("\n    "+t._s(t.media.year)+"\n  ")]),t._v(" "),n("div",{staticClass:"list__item-block _genres"},[n("span",{staticClass:"list__item-span"},[t._v("Genres")]),t._v("\n    "+t._s(t.genres)+"\n  ")]),t._v(" "),t.loggedIn?n("div",{staticClass:"list__item-block _controls"},[n("crud-buttons",{attrs:{id:t.media._id,"media-type":t.mediaType},on:{delete:t.handleDelete}})],1):t._e()])}),[],!1,null,"19881c98",null).exports;function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var M=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},N=function(t){Object(c.a)(n,t);var e=E(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).slice=1,t.sort={title:"",duration:"",year:""},t}return Object(o.a)(n,[{key:"getSorterClass",value:function(t){return"ASC"===this.sort[t]?"_top":"DESC"===this.sort[t]?"_bottom":"f"}},{key:"handleSort",value:function(t){for(var e=0,n=Object.entries(this.sort);e<n.length;e++){var r=Object(w.a)(n[e],1)[0];r!==t&&(this.sort[r]="")}"ASC"===this.sort[t]?(this.sort[t]="",this.list.sort(this.sortByKey("createdAt"))):"DESC"===this.sort[t]?(this.sort[t]="ASC",this.list.sort(this.sortByKey(t))):(this.sort[t]="DESC",this.list.sort(this.sortByKey(t))),this.list.sort(this.sortByWatched())}},{key:"sortByKey",value:function(t){return"createdAt"===t?function(a,b){return new Date(a[t]).getTime()>new Date(b[t]).getTime()?1:-1}:"DESC"===this.sort[t]?function(a,b){return a[t]<b[t]?1:-1}:function(a,b){return a[t]>b[t]?1:-1}}},{key:"sortByWatched",value:function(){return this.sortByKey("watched")}},{key:"handleDelete",value:function(t){return t}},{key:"createLink",get:function(){return this.friend?{name:"friend-media-add",params:{friend:this.friend.username,media:this.mediaType}}:{name:"media-add",params:{media:this.mediaType}}}},{key:"listSlice",get:function(){return this.list.slice(0,20*this.slice)}}]),n}(m.d);M([Object(m.c)({default:!1,required:!1,type:Boolean})],N.prototype,"controls",void 0),M([Object(m.c)({default:function(){},required:!1,type:Object})],N.prototype,"friend",void 0),M([Object(m.c)({default:function(){return[]},required:!0,type:Array})],N.prototype,"list",void 0),M([Object(m.c)({default:"",required:!0,type:String})],N.prototype,"title",void 0),M([Object(m.c)({default:"",required:!0,type:String})],N.prototype,"mediaType",void 0),M([Object(m.b)("delete")],N.prototype,"handleDelete",null);var W=N=M([Object(m.a)({components:{MediaView:B}})],N),K=(n(488),Object(O.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.list.length?n("div",{staticClass:"list-header"},[n("div",{staticClass:"list-header__block _title"},[n("button",{class:["list-header__title","_sorter",t.getSorterClass("title")],on:{click:function(e){return t.handleSort("title")}}},[t._v("\n        Title\n      ")])]),t._v(" "),n("div",{staticClass:"list-header__block _duration"},[n("button",{class:["list-header__title","_sorter",t.getSorterClass("duration")],on:{click:function(e){return t.handleSort("duration")}}},[t._v("\n        Duration\n      ")])]),t._v(" "),n("div",{staticClass:"list-header__block _year"},[n("button",{class:["list-header__title","_sorter",t.getSorterClass("year")],on:{click:function(e){return t.handleSort("year")}}},[t._v("\n        Year\n      ")])]),t._v(" "),t._m(0)]):t._e(),t._v(" "),t.list.length?n("div",[n("ul",{staticClass:"list"},t._l(t.listSlice,(function(e){return n("media-view",{key:e._id,attrs:{controls:t.controls,media:e,"media-type":t.mediaType,friend:t.friend},on:{delete:t.handleDelete}})})),1),t._v(" "),t.listSlice.length<t.list.length?n("i-button",{on:{click:function(e){t.slice++}}},[t._v("Show more")]):t._e()],1):n("i-alert",{staticClass:"mt-2 text-center",attrs:{show:""}},[t._v("\n    "+t._s("Your list is empty, my lord")+"\n  ")])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"list-header__block _genres"},[e("span",{staticClass:"list-header__title"},[this._v("Genres")])])}],!1,null,"2ececcb4",null)),L=K.exports;function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}installComponents(K,{IButton:n(37).default,IAlert:n(207).default});var G=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},Y=function(t){Object(c.a)(n,t);var e=z(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).formatDuration=h,t.loading=!0,t.media=[{list:[],title:"Animes",mediaType:"anime"},{list:[],title:"Anime Serials",mediaType:"anime-serial"},{list:[],title:"Films",mediaType:"film"},{list:[],title:"Serials",mediaType:"serial"},{list:[],title:"Others",mediaType:"other"}],t.statistic={total:{days:0,hours:0,minutes:0},totalToView:{days:0,hours:0,minutes:0},totalViewed:{days:0,hours:0,minutes:0}},t.viewedPercent=0,t}return Object(o.a)(n,[{key:"getMinutes",value:function(t){return 24*t.days*60+60*t.hours+t.minutes}},{key:"handleDelete",value:function(t){var e=t.media,n=t.mediaType,i=this.media.findIndex((function(t){return t.mediaType===n}));i>=0&&(this.media[i].list=this.media[i].list.filter((function(t){return t._id!==e._id})))}},{key:"mounted",value:function(){var t=this;this.$axios({method:"get",url:"/media"}).then((function(e){var data=e.data;t.media=data})).finally((function(){setTimeout((function(){t.loading=!1}),200)})),this.$axios({method:"get",url:"/media/statistic"}).then((function(e){var data=e.data;t.statistic=data,t.viewedPercent=t.getMinutes(data.totalViewed)/t.getMinutes(data.total)}))}}]),n}(m.d),J=Y=G([Object(m.a)({auth:!1,components:{AnimateNumber:k,MSpinner:R.a,MediaList:L}})],Y),U=(n(490),Object(O.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("m-spinner",{attrs:{loading:t.loading}},[n("i-row",{staticClass:"_margin-bottom-2",attrs:{center:"",middle:""}},[n("i-column",{staticClass:"_text-right"},[t._v("\n      Total viewed\n      "),n("span",{staticStyle:{"font-size":"1.25em"}},[n("animate-number",{attrs:{number:t.statistic&&t.statistic.totalViewed&&t.statistic.totalViewed.days,speed:100,postfix:"d"}}),t._v(" "),n("animate-number",{attrs:{number:t.statistic&&t.statistic.totalViewed&&t.statistic.totalViewed.hours,speed:50,postfix:"h"}}),t._v(" "),n("animate-number",{attrs:{number:t.statistic&&t.statistic.totalViewed&&t.statistic.totalViewed.minutes,speed:10,postfix:"m"}})],1)]),t._v(" "),n("i-column",{attrs:{md:5}},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress__bar",style:{transform:"scale("+t.viewedPercent+", 1)"}})])]),t._v(" "),n("i-column",{staticClass:"_text-left"},[n("span",{staticStyle:{"font-size":"1.25em"}},[n("animate-number",{attrs:{number:t.statistic&&t.statistic.totalToView&&t.statistic.totalToView.days,speed:100,postfix:"d"}}),t._v(" "),n("animate-number",{attrs:{number:t.statistic&&t.statistic.totalToView&&t.statistic.totalToView.hours,speed:50,postfix:"h"}}),t._v(" "),n("animate-number",{attrs:{number:t.statistic&&t.statistic.totalToView&&t.statistic.totalToView.minutes,speed:10,postfix:"m"}})],1),t._v("\n      Total to view\n    ")])],1),t._v(" "),n("i-tabs",t._l(t.media,(function(e){return n("i-tab",{key:e.mediaType,attrs:{title:e.title}},[n("media-list",{attrs:{controls:t.$auth.loggedIn,list:e.list,"media-type":e.mediaType,title:e.title},on:{delete:t.handleDelete}})],1)})),1)],1)}),[],!1,null,"5e06ce25",null));e.default=U.exports;installComponents(U,{IColumn:n(61).default,IRow:n(47).default,ITab:n(213).default,ITabs:n(212).default})}}]);